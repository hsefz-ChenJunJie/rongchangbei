# 荣昶杯项目 - AI对话助手前端

这是荣昶杯项目的简易Web前端实现，提供完整的AI对话助手功能循环体验。

## 🎯 核心功能

实现了计划中的四步核心功能循环：

1. **对话情景输入与录音** - 用户可输入对话背景，并进行语音录制
2. **意见输入与建议生成** - 根据用户意见和语音内容生成AI回答建议
3. **建议展示与修改** - 展示多个建议供选择，支持修改意见重新生成
4. **最终修改与输出** - 支持手动编辑，输出语音和文字结果

## 🚀 快速开始

### 前提条件

1. **后端服务** - 确保后端API服务器正在运行
   ```bash
   cd ../backend
   # 根据后端文档启动FastAPI服务器
   ```

2. **浏览器要求** - 支持现代浏览器（Chrome、Firefox、Safari、Edge）
   - 需要麦克风权限（用于录音功能）
   - 需要支持Web Audio API和Fetch API

### 启动前端

#### 方法1：使用Python服务器（推荐）

```bash
cd frontend(web)
python server.py
```

默认在 `http://localhost:3000` 运行，如需其他端口：

```bash
python server.py 8080  # 使用8080端口
```

#### 方法2：使用其他HTTP服务器

```bash
# 使用Node.js的http-server
npx http-server -p 3000 --cors

# 使用Python内置服务器
python -m http.server 3000
```

### 访问应用

在浏览器中打开 `http://localhost:3000`，按照页面引导完成功能体验。

## 🔧 功能详解

### 第一步：对话情景与录音

- **对话情景描述**：可选输入，为AI提供上下文背景
- **录音功能**：
  - 点击"开始录音"按钮进行语音录制
  - 录音中状态显示和动画效果
  - 自动调用STT API进行语音识别
  - 识别结果显示置信度

### 第二步：意见输入与生成建议

- **用户意见**：可选输入，指导AI生成特定类型的回答
- **生成建议**：
  - 整合对话情景、语音内容、用户意见
  - 调用LLM API生成多个回答建议
  - 支持流式响应，实时显示生成进度

### 第三步：建议展示与修改

- **建议选择**：
  - 展示3个AI生成的回答建议
  - 点击选择，高亮显示选中状态
  - 显示建议的置信度评分
- **修改重生成**：
  - 输入修改意见
  - 基于修改意见重新生成建议

### 第四步：最终输出

- **手动编辑**：可在最终文本框中进一步修改内容
- **语音输出**：
  - 调用TTS API生成语音
  - 支持音频播放控制
- **文本输出**：一键复制到剪贴板

## 🛠️ 技术架构

### 前端技术栈

- **HTML5** - 语义化页面结构
- **CSS3** - 现代UI设计和动画效果
- **Vanilla JavaScript** - 纯JS实现，无依赖框架
- **Web Audio API** - 录音功能实现
- **Fetch API** - 后端API调用
- **Server-Sent Events** - 流式响应处理

### API集成

- **STT API** (`POST /api/stt`) - 语音转文字
- **TTS API** (`POST /api/tts`) - 文字转语音
- **LLM API** (`POST /api/generate_suggestions`) - 生成建议
- **Speakers API** (`GET /api/tts/speakers`) - 获取说话人信息

### 关键特性

- **响应式设计** - 适配不同屏幕尺寸
- **实时状态反馈** - 详细的操作状态提示
- **错误处理** - 完善的异常处理和用户提示
- **无障碍支持** - 语义化标签和键盘导航
- **流式响应** - 实时显示AI生成进度

## 🎨 界面设计

### 视觉风格

- **现代化设计** - 渐变背景和卡片式布局
- **步骤化引导** - 清晰的数字步骤标识
- **状态可视化** - 不同颜色表示操作状态
- **动画效果** - 按钮悬停和录音动画

### 交互体验

- **直观操作** - 点击式交互，无需复杂操作
- **即时反馈** - 操作后立即显示状态变化
- **进度提示** - 长时间操作显示进度信息
- **容错设计** - 防止误操作和意外情况

## 🔍 故障排除

### 常见问题

1. **无法录音**
   - 检查浏览器麦克风权限
   - 确保使用HTTPS或localhost访问
   - 检查麦克风硬件连接

2. **API调用失败**
   - 确认后端服务器运行状态
   - 检查API地址配置（默认localhost:8000）
   - 查看浏览器控制台错误信息

3. **语音播放问题**
   - 检查浏览器音频播放权限
   - 确认TTS API服务可用
   - 检查音频格式支持

4. **CORS错误**
   - 使用提供的server.py启动前端
   - 或确保后端已配置CORS允许

### 调试技巧

- 打开浏览器开发者工具查看控制台日志
- 检查网络面板查看API请求状态
- 查看应用面板检查权限设置

## 📝 开发说明

### 文件结构

```
frontend(web)/
├── index.html      # 主页面
├── app.js          # 核心逻辑
├── server.py       # 本地服务器
└── README.md       # 本文档
```

### 自定义配置

如需修改API地址，编辑 `app.js` 中的 `API_BASE_URL` 变量：

```javascript
const API_BASE_URL = 'http://your-backend-url:port';
```

### 扩展功能

- 添加更多语音参数控制（语速、音调等）
- 支持多种音频格式
- 添加历史记录功能
- 实现用户偏好设置

## 🤝 贡献

这是荣昶杯项目的一部分，如有改进建议请通过项目仓库提交。

## 📄 许可证

本项目为教育和竞赛用途，遵循项目整体许可协议。