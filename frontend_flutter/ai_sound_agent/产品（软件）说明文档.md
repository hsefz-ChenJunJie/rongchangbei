# 言语障碍辅助系统

## 项目背景

言语障碍包括表达性障碍等。据残疾人口普查统计，我国言语残疾人数超过100万。目前存在一些解决方案和辅助工具：语音转文字软件、手语翻译AI、带有常用词汇或图标的flashcard等，但这些工具都存在普及率不高、效率低下、表达能力弱等问题

## 项目方案

为了解决语言表达障碍或者与正常人之间的交流困境，我们考虑使用语音转文字、文字转语音技术，并在中间加以大模型生成提示来解决打字效率过慢的问题。

### 方案总览

1. 用户手动输入对话场景，或选择对话包（预设）快速开始
2. 通过STT识别环境中/他人对话
3. 大语言模型根据当前对话生成回答建议
4. 用户选择回答或自己输入
5. 用户选择是否需要语音合成

## iDialogue 前端实现

前端使用flutter实现，采用响应式设计。

### 技术架构

- **状态管理**: 使用Provider和本地存储
- **网络通信**: WebSocket实现实时语音通信
- **音频处理**: 集成录音、语音识别、语音合成
- **UI框架**: Material Design 3设计规范

以下是前端页面总览

### 首页

#### 页面设计

从上到下分别是：
- **大输入框**（用来输入对话情景）
- **"即刻开始"按钮**
- **"猜你喜欢"专区**，以卡片的形式呈现出预制对话包或者是用户自制对话包

#### 业务逻辑

1. 点击即刻开始可以从对话框中读取场景，并将其保存到`current.dp`中，随后跳转到主处理页
2. 点击对话包会直接将其复制到`current.dp`中，随后跳转到主处理页

### 主处理页

#### 页面设计

采用三栏式布局：
- **左侧栏**: 角色管理（可添加、编辑、删除对话角色）
- **中间区域**: 对话记录显示（实时显示对话内容）
- **右侧栏**: 设置面板（包含场景补充、用户意见、修改建议等）

#### 功能特性

- **实时语音识别**: 支持中英文语音识别
- **智能回答生成**: 基于大语言模型生成3个回答建议
- **语音合成**: 支持多种语音和语速调节
- **断线重连**: 自动重连机制，最多重试5次
- **实时保存**: 对话内容自动保存到`current.dp`

#### 操作流程

1. 页面加载时读取`current.dp`文件
2. 建立WebSocket连接获取会话ID
3. 开始录音并实时转文字
4. AI根据上下文生成回答建议
5. 用户选择或修改回答
6. 可选择语音播放回答内容

### 设置页

#### 页面设计

从上到下分别是：
- **主题色设置**（输入框+预设选择，支持自定义颜色）
- **连接设置**（WebSocket URL输入框）
- **"保存设置"和"恢复默认值"按钮**
- **"设备测试"和"高级设置"按钮**
- **返回按钮**

#### 主题支持

预设主题色：
- 默认绿色（defaultColor）
- 热情红色（defaultRedColor）
- 柔和桃色（peachpuffColor）

### 设备测试页

#### 测试项目

- **网络测试**: 测试服务器连接和响应速度
- **麦克风测试**: 录音功能测试，支持实时音量显示
- **语音识别测试**: STT功能测试，支持中英文
- **VAD测试**: 语音活动检测，识别说话开始和结束
- **扬声器测试**: 音频播放功能测试
- **TTS测试**: 文字转语音测试，支持多语言和语速调节

#### 特色功能

- **可视化音频**: 实时显示音量和波形
- **权限检测**: 自动检测麦克风、通讯录等权限
- **一键测试**: 支持所有功能的快速测试

### 发现页

#### 功能描述

- **在线对话包**: 浏览和下载在线对话包资源
- **搜索功能**: 支持按名称、描述搜索对话包
- **下载管理**: 显示已下载的对话包，支持重新下载
- **资源更新**: 自动检查在线资源更新

#### 资源类型

- **商务谈判**: 模拟商务场景对话
- **面试技巧**: 求职面试对话练习
- **日常对话**: 日常生活交流练习
- **医疗咨询**: 医疗场景对话
- **教育学习**: 教育相关对话内容

### 对话人管理页

#### 功能特性

- **联系人管理**: 添加、编辑、删除对话人
- **拼音排序**: 按姓名拼音首字母排序
- **搜索功能**: 实时搜索对话人
- **通讯录导入**: 支持从手机通讯录导入联系人
- **快速添加**: 支持快速创建对话人

#### 数据管理

- **本地存储**: 对话人信息本地加密存储
- **快速检索**: 支持拼音搜索
- **批量操作**: 支持批量删除和导出

### 本地对话包管理页

#### 管理功能

- **文件列表**: 显示所有本地对话包
- **搜索过滤**: 支持按名称、描述搜索
- **删除操作**: 支持单个删除（默认包不可删除）
- **文件信息**: 显示包名称、描述、消息数量等详情
- **快速刷新**: 一键刷新文件列表

### 技术特点

#### 网络特性

- **断线重连**: 智能重连机制
- **缓存机制**: 离线模式支持

### 文件结构

#### 核心文件

- `current.dp`: 当前对话的实时保存文件
- `default.dp`: 默认对话包模板
- `partners.json`: 对话人信息存储

#### 对话包格式

```json
{
  "type": "dialogue_package",
  "packageName": "包名称",
  "fileName": "文件名",
  "description": "描述信息",
  "responseCount": 3,
  "scenarioDescription": "场景描述",
  "messages": [],
  "modification": "",
  "userOpinion": "",
  "scenarioSupplement": ""
}
```


### 安装和部署

#### 移动端安装
1. 从我们的官网下载安装
2. 授予必要的权限（麦克风、存储等）
3. 完成初始化设置



